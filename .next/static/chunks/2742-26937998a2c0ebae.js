"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2742],{3181:function(e,t,n){n.d(t,{Z:function(){return N}});var r=n(7437),a=n(2265),o=n(1609),s=n(9605),l=n(1718),i=n(4012),u=n(2913),c=n(3046),d=n(2670),p=n(4027);function g(e){let{children:t,title:n,isCloseIcon:a}=e,{isModalOpen:g}=(0,c.v9)(e=>e.loginModal),h=(0,c.I0)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(o.R,{isOpen:g,placement:"bottom-center",hideCloseButton:!0,backdrop:"blur",children:(0,r.jsx)(s.A,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.k,{className:"flex flex-col gap-1 relative bg-green-100",children:[(0,r.jsx)("div",{className:"flex w-full",children:(0,r.jsx)("div",{children:n})}),!1===a&&(0,r.jsx)("button",{className:"absolute right-4 top-4 w-7 h-7 rounded-full flex justify-center items-center hover:bg-gray-100",onClick:()=>h((0,d.b_)(!1)),children:(0,r.jsx)(p.Z,{className:"w-5 h-5 text-gray-500"})})]}),(0,r.jsx)(i.I,{children:t}),(0,r.jsx)(u.R,{})]})})})})}var h=n(9733),f=n(2537),m=n(5691),y=n(9484),x=n(1396),b=n.n(x),w=n(8227),_=n(6898),j=n(4033),v=n(7415),N=e=>{let{isCloseIcon:t}=e,{setLogin:n,setSession:o}=(0,_.a)(),[s,l]=(0,a.useState)(!1),i=(0,c.I0)();(0,j.useRouter)();let u=(0,f.TA)({initialValues:{email_or_phone_no:"",password:""},validationSchema:m.Ry({email_or_phone_no:m.Z_().required("Email or phone is required"),password:m.Z_().required("Password is required")}),onSubmit:async e=>{try{l(!0);let t={...e,user_role:"1",session_id:new Date().getTime().toString()},r=await y.x4(t);if(r&&200===r.status){v.Am.success("Login successful");let e=r.user_id;n(e),o(t.session_id),i((0,d.b_)(!1))}else v.Am.success("Login failed");l(!1)}catch(e){var t;console.log(e),l(!1),(null===(t=e.response)||void 0===t?void 0:t.status)===409?v.Am.error("Invalid credentials"):v.Am.error("Something went wrong")}}});return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(g,{title:"Sign-in to Next.care",isCloseIcon:t,children:(0,r.jsxs)("div",{className:"flex flex-col gap-5 mt-5 w-full",children:[(0,r.jsx)(h.Z,{onChange:u.handleChange,value:u.values.email_or_phone_no,type:"text",name:"email_or_phone_no",placeholder:"Email or Phone Number",onBlur:u.handleBlur,error:u.errors.email_or_phone_no&&u.touched.email_or_phone_no?u.errors.email_or_phone_no:"",className:"bg-gray-50 border  border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full  p-4  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"}),(0,r.jsx)(h.Z,{onChange:u.handleChange,value:u.values.password,type:"password",name:"password",placeholder:"Password",onBlur:u.handleBlur,error:u.errors.password&&u.touched.password?u.errors.password:"",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full  p-4  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"}),(0,r.jsx)("div",{className:"flex justify-between items-center gap-5",children:(0,r.jsxs)(b(),{href:"/auth/signup",className:"text-blue-950 ",children:["Don't have an account?"," ",(0,r.jsx)("span",{className:"font-bold",children:"Create Account"})]})}),(0,r.jsx)(w.A,{isLoading:s,onClick:e=>{u.handleSubmit()},className:"p-6 w-full text-white bg-violet-600 rounded-[96.709px]",children:"Login"})]})})})}},9733:function(e,t,n){var r=n(7437);n(2265),t.Z=e=>{let{value:t="",className:n="",name:a="",placeholder:o="",type:s="text",onChange:l,readOnly:i=!1,error:u="",min:c="",max:d="",disabled:p=!1,autoComplete:g=!1,onBlur:h,isLabel:f=!1}=e;return(0,r.jsxs)("div",{children:[f&&(0,r.jsx)("label",{htmlFor:a,className:"block text-sm font-medium text-gray-700",children:o}),(0,r.jsx)("input",{id:a,type:s,value:t,name:a,"aria-label":o,className:n,placeholder:o,onChange:l,readOnly:i,disabled:p,min:c,max:d,autoComplete:g?"on":"off","aria-autocomplete":"none",autoFocus:!1,autoCorrect:"off",onBlur:h}),u&&(0,r.jsx)("small",{className:"text-red-500",children:u})]})}},6898:function(e,t,n){n.d(t,{a:function(){return i},d:function(){return l}});var r=n(7437),a=n(2265),o=n(605);let s=(0,a.createContext)({user:null,setLogin:()=>{},setLogout:()=>{},setSession:()=>{},userSession:null,isLoggedIn:!1,userDetails:null,userDetailsSet:()=>{}}),l=e=>{let{children:t}=e,[n,l]=(0,a.useState)(null),[i,u]=(0,a.useState)(null),[c,d]=(0,a.useState)(!1),[p,g]=(0,a.useState)(null),h=e=>{u(e),(0,o.qQ)("session",JSON.stringify(e))};return(0,a.useEffect)(()=>{let e=(0,o.$o)("user"),t=(0,o.$o)("session"),n=(0,o.$o)("isLoggedIn");if(n&&d(!0),e&&e.length>0){let t=JSON.parse(e);l(t)}if(t&&t.length>0){let e=JSON.parse(t);h(e)}},[c]),(0,r.jsx)(s.Provider,{value:{user:n,setLogin:e=>{l(e),(0,o.qQ)("user",JSON.stringify(e)),(0,o.qQ)("isLoggedIn",!0),d(!0)},setLogout:()=>{(0,o.dZ)("user"),l(null),(0,o.dZ)("session"),u(null),(0,o.dZ)("isLoggedIn"),d(!1),g(null)},setSession:h,userSession:i,isLoggedIn:c,userDetails:p,userDetailsSet:e=>{g(e)}},children:t})},i=()=>(0,a.useContext)(s)},2670:function(e,t,n){n.d(t,{b_:function(){return o}});var r=n(9730);let a=(0,r.oM)({name:"loginModal",initialState:{isModalOpen:!1},reducers:{setLoginModal:(e,t)=>{e.isModalOpen=t.payload}}}),{setLoginModal:o}=a.actions;t.ZP=a.reducer},9971:function(e,t,n){n.d(t,{PN:function(){return p},RS:function(){return s},eg:function(){return c},g$:function(){return u},qw:function(){return i},tn:function(){return l},uY:function(){return o},xR:function(){return d}});var r=n(9730);let a=(0,r.oM)({name:"questionary",initialState:{currentStep:0,answers:{},disableNext:!0,photoUploadEnable:!1,uploadImages:[]},reducers:{increaseStep:e=>{e.currentStep+=1},decreaseStep:e=>{e.currentStep-=1},setAnswers:(e,t)=>{e.answers[t.payload.id]=t.payload.value},setDisableNext:(e,t)=>{e.disableNext=t.payload},setPhotoUploadEnable:(e,t)=>{e.photoUploadEnable=t.payload},uploadImages:(e,t)=>{e.uploadImages.push(t.payload)},deleteImages:(e,t)=>{let n=t.payload,r=e.uploadImages.findIndex(e=>e===n);if(-1===r)return console.warn("Image with name: ".concat(n," not found.")),e;let a=e.uploadImages.filter((e,t)=>t!==r);return{...e,uploadImages:a}},resetQuestions:e=>{e.currentStep=0,e.answers={},e.disableNext=!0,e.photoUploadEnable=!1,e.uploadImages=[]}}}),{increaseStep:o,decreaseStep:s,setAnswers:l,setDisableNext:i,setPhotoUploadEnable:u,uploadImages:c,deleteImages:d,resetQuestions:p}=a.actions;t.ZP=a.reducer},9484:function(e,t,n){n.d(t,{lF:function(){return o},Xk:function(){return i},X5:function(){return g},ge:function(){return y},dd:function(){return m},xY:function(){return f},Qn:function(){return u},CC:function(){return d},LN:function(){return h},PR:function(){return l},x4:function(){return s},BN:function(){return p},hL:function(){return c}});var r=n(2173);let a="https://www.nextcare.life:8000/api/v1/",o=async e=>{let{data:t}=await r.Z.post(a+"users/create-user",e,{headers:{"Content-Type":"application/json"}});return t},s=async e=>{let{data:t}=await r.Z.post(a+"users/user-login",e,{headers:{"Content-Type":"application/json"}});return t},l=async e=>{let{data:t}=await r.Z.get(a+"users/get-user?user_id=".concat(e),{headers:{"Content-Type":"application/json"}});return t},i=async e=>{try{let{data:t}=await r.Z.put(a+"users/update-user",e,{headers:{"Content-Type":"application/json"}});return t}catch(e){console.log(e)}},u=async()=>{try{let{data:e}=await r.Z.get(a+"level_value_mapping/view_key_criteria",{headers:{"Content-Type":"application/json"}});return e}catch(e){if("ECONNABORTED"===e.code)throw Error("timeout");throw e}},c=async e=>{try{let{data:t}=await r.Z.get(a+"records/show_records?key_combination="+e,{headers:{"Content-Type":"application/json"}});return t}catch(e){if(console.log(e),"ECONNABORTED"===e.code)throw console.log("timeout"),Error("timeout")}},d=async e=>{try{let{data:t}=await r.Z.post(a+"master_questionnaire/show_question_details",e,{headers:{"Content-Type":"application/json"}});return t}catch(e){console.log(e)}},p=async e=>{try{let{data:t}=await r.Z.post(a+"users/save-user-questionnaire",e,{headers:{"Content-Type":"application/json"}});return t}catch(e){console.log(e)}},g=async e=>{try{let{data:t}=await r.Z.post(a+"case/create-case",e,{headers:{"Content-Type":"application/json"}});return t}catch(e){console.log(e)}},h=async e=>{let{data:t}=await r.Z.get(a+"users/patient_dashboard?user_id=".concat(e),{headers:{"Content-Type":"application/json"}});return t},f=async e=>{let{data:t}=await r.Z.get(a+"case/prescription?case_id=".concat(e),{headers:{"Content-Type":"application/json"}});return t},m=async e=>{let{data:t}=await r.Z.get(a+"case/case-report?case_id=".concat(e),{headers:{"Content-Type":"application/json"}});return t},y=async e=>{try{let{data:t}=await r.Z.post(a+"users/send_otp",e,{headers:{"Content-Type":"application/json"}});return t}catch(e){console.log(e)}}},605:function(e,t,n){n.d(t,{$o:function(){return a},dZ:function(){return o},qQ:function(){return r}});let r=(e,t)=>{try{{let n=JSON.stringify(t);localStorage.setItem(e,n)}}catch(e){console.log(e)}},a=e=>{try{{let t=localStorage.getItem(e);if(!t||"undefined"===t)return null;let n=JSON.parse(t);return n}}catch(e){console.log(e)}},o=e=>{try{localStorage.removeItem(e)}catch(e){console.log(e)}}}}]);